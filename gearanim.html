<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Dashboard</title>
    <link rel="icon" href="https://placehold.co/32x32/1a202c/ffffff?text=D" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Off-white background */
            color: #1f2937;
        }

        .nav-link { transition: all 0.3s ease; position: relative; }
        .nav-link.active::after {
            content: ''; position: absolute; left: 50%; bottom: -8px; width: 80%; height: 4px;
            background-color: #1e40af; border-radius: 9999px; transform: translateX(-50%);
            animation: fadeInScale 0.3s forwards;
        }
        @keyframes fadeInScale { from { transform: translateX(-50%) scaleX(0); opacity: 0; } to { transform: translateX(-50%) scaleX(1); opacity: 1; } }
        
        .content-section { display: none; padding: 2rem; animation: fadeIn 0.5s ease-in-out; overflow-y: auto; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Hero Carousel Styles */
        .hero-carousel-container { position: relative; width: 100%; height: 60vh; display: flex; justify-content: center; align-items: center; perspective: 1200px; }
        .carousel-slide { position: absolute; width: 70%; height: 100%; border-radius: 1.5rem; overflow: hidden; box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2), 0 8px 10px -6px rgba(0, 0, 0, 0.2); transition: transform 0.8s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.8s ease, z-index 0s 0.4s; cursor: pointer; }
        .carousel-slide img { width: 100%; height: 100%; object-fit: cover; }
        .carousel-slide.active { transform: translateX(0) scale(1); opacity: 1; z-index: 10; }
        .carousel-slide.prev { transform: translateX(-40%) scale(0.8); opacity: 0.5; z-index: 5; }
        .carousel-slide.next { transform: translateX(40%) scale(0.8); opacity: 0.5; z-index: 5; }
        .carousel-slide.hidden-prev { transform: translateX(-80%) scale(0.6); opacity: 0; z-index: 1; }
        .carousel-slide.hidden-next { transform: translateX(80%) scale(0.6); opacity: 0; z-index: 1; }
        .carousel-arrow { position: absolute; top: 50%; transform: translateY(-50%); z-index: 20; background-color: rgba(255, 255, 255, 0.7); border-radius: 50%; width: 50px; height: 50px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: background-color 0.3s ease, transform 0.3s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .carousel-arrow:hover { background-color: rgba(255, 255, 255, 1); transform: translateY(-50%) scale(1.1); }
        .arrow-left { left: 5%; }
        .arrow-right { right: 5%; }

        /* Simplified & Beautified Attribute Cards */
        .attribute-card {
            background-color: #ffffff;
            border-radius: 1rem;
            padding: 2rem 1.5rem;
            text-align: center;
            border: 2px solid transparent;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            opacity: 0;
            animation: fadeInUp 0.5s ease-out forwards;
        }
        .attribute-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: #34D399; /* green-400 */
        }
        .attribute-card .icon {
            font-size: 3rem;
            margin: 0 auto 1.25rem auto;
            color: #10B981; /* green-500 */
        }
        .attribute-card h4 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #111827;
            margin-bottom: 0.5rem;
        }
        .attribute-card p {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #4b5563;
        }

        /* Staggered animation for new cards */
        .attribute-card:nth-child(1) { animation-delay: 0.1s; }
        .attribute-card:nth-child(2) { animation-delay: 0.2s; }
        .attribute-card:nth-child(3) { animation-delay: 0.3s; }
        .attribute-card:nth-child(4) { animation-delay: 0.4s; }
        .attribute-card:nth-child(5) { animation-delay: 0.5s; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* Assistant Avatar and Popup Icons */
        .assistant-container { position: fixed; bottom: 2rem; right: 2rem; z-index: 50; display: flex; flex-direction: column; align-items: center; }
        .assistant-avatar { cursor: pointer; position: relative; }
        
        .rotating-border {
            position: relative;
            border-radius: 9999px;
            padding: 4px; /* Adjust padding to control the distance of the light from the avatar */
            overflow: hidden; /* Hide the parts of the gradient that go outside the circle */
        }
        .rotating-border::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 150%; /* Make it larger to ensure the gradient covers the area */
            height: 150%;
            background: conic-gradient(from 0deg, transparent 0%, transparent 70%, #F97316 100%);
            animation: spin-light 4s linear infinite;
            transform-origin: center center;
            transform: translate(-50%, -50%);
            z-index: 1;
        }
        @keyframes spin-light {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .dot { position: absolute; top: 0; right: 0; width: 10px; height: 10px; border-radius: 50%; background-color: #22c55e; border: 2px solid #fff; z-index: 3;}
        
        .social-icons { display: flex; flex-direction: column; align-items: flex-end; margin-bottom: 1rem; }
        .social-item { display: flex; align-items: center; margin-top: 12px; opacity: 0; transform: translateX(20px); transition: opacity 0.3s ease, transform 0.3s ease; }
        .social-icon { width: 48px; height: 48px; transition: transform 0.3s ease; display: flex; justify-content: center; align-items: center; }
        .social-icon img { width: 100%; height: 100%; object-fit: contain; }
        .social-icon img[alt="Telegram"] { width: 80%; height: 80%; } /* CORRECTED: Further resized Telegram icon */
        .social-icon:hover { transform: scale(1.15); }
        .social-label { margin-right: 1rem; font-weight: bold; color: #1f2937; }

        .assistant-container.active .social-item { opacity: 1; transform: translateX(0); }
        .assistant-container.active .social-item:nth-child(1) { transition-delay: 0.1s; }
        .assistant-container.active .social-item:nth-child(2) { transition-delay: 0.2s; }
        .assistant-container.active .social-item:nth-child(3) { transition-delay: 0.3s; }

        /* Comic Bubble for Assistant */
        .comic-bubble {
            position: absolute;
            bottom: 110%; /* Position above the avatar */
            left: 50%;
            transform: translateX(-50%) scale(0);
            transform-origin: bottom center;
            background-color: white;
            color: #1f2937;
            padding: 0.75rem 1.25rem;
            border-radius: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 0.9rem;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none; /* Make it non-clickable */
        }
        .comic-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid white;
        }
        .comic-bubble.show {
            opacity: 1;
            transform: translateX(-50%) scale(1);
        }

        /* Call Us Button */
        .call-us-button {
            background-color: #F97316; /* Orange-500 */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 700;
            transition: transform 0.3s ease-in-out;
        }
        .call-us-button:hover {
            transform: scale(1.1);
        }
        
        /* Shaking Phone Icon Animation */
        .call-icon {
            animation: shake 1.5s cubic-bezier(.36,.07,.19,.97) infinite;
        }
        @keyframes shake {
            10%, 90% { transform: translateX(-1px); }
            20%, 80% { transform: translateX(2px); }
            30%, 50%, 70% { transform: translateX(-4px); }
            40%, 60% { transform: translateX(4px); }
        }

        /* UPDATED Calculator Styles */
        .calculator-card {
            background: linear-gradient(145deg, #ffffff, #f7f8fa);
            padding: 2.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.08), 0 8px 10px -6px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* --- NEW: Gears Loader Animation --- */
        #loaderContainer i {
            color: #facc15; /* yellow-400 */
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes spin-reverse { from { transform: rotate(0deg); } to { transform: rotate(-360deg); } }

        .gear-1 {
            font-size: 3rem; /* Medium gear */
            animation: spin 2s linear infinite;
        }
        .gear-2 {
            font-size: 4.5rem; /* Large gear */
            animation: spin-reverse 3s linear infinite;
        }
        .gear-3 {
            font-size: 2rem; /* Small gear */
            animation: spin 1.5s linear infinite;
        }

        /* Other Styles */
        .gallery-image { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .gallery-image:hover { transform: translateY(-5px) scale(1.05); box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.2); }
        .button-hover-effect { position: relative; z-index: 1; overflow: hidden; }
        .button-hover-effect:before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.4)); transition: all 0.3s ease-in-out; transform: scaleX(0); transform-origin: left; z-index: -1; }
        .button-hover-effect:hover:before { transform: scaleX(1); }
        .toggle-switch { position: relative; display: inline-block; width: 60px; height: 34px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #2196F3; }
        input:checked + .slider:before { transform: translateX(26px); }

    </style>
</head>
<body class="bg-gray-100 flex flex-col min-h-screen">

    <!-- Dashboard Header -->
    <header class="bg-white shadow-sm py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <h1 class="text-3xl font-extrabold text-blue-800 tracking-tight">StartupCo.</h1>
            <nav class="flex items-center space-x-8">
                <ul class="flex space-x-8">
                    <li><a href="#" data-section="home" class="nav-link font-medium text-gray-600 hover:text-gray-900 active">Home</a></li>
                    <li><a href="#" data-section="gallery" class="nav-link font-medium text-gray-600 hover:text-gray-900">Gallery</a></li>
                    <li><a href="#" data-section="drivers" class="nav-link font-medium text-gray-600 hover:text-gray-900">Drivers</a></li>
                    <li><a href="#" data-section="calculator" class="nav-link font-medium text-gray-600 hover:text-gray-900">Fare Calculator</a></li>
                </ul>
                <!-- UPDATED: Call Us Button with Icon -->
                <a href="tel:+1234567890" class="call-us-button flex items-center space-x-2">
                    <i class="fas fa-phone call-icon"></i>
                    <span>+1 (23) 456-7890</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 overflow-auto">
        <!-- Home Page Section -->
        <section id="home" class="content-section active">
            <div class="container mx-auto px-8 lg:px-12 pt-8">
                <div class="hero-carousel-container">
                    <div class="carousel-slide" data-index="0"><img src="HeroImage1.jpg" alt="Hero Image 1" /></div>
                    <div class="carousel-slide" data-index="1"><img src="HeroImage2.jpg" alt="Hero Image 2" /></div>
                    <div class="carousel-slide" data-index="2"><img src="HeroImage3.jpg" alt="Hero Image 3" /></div>
                    <div class="carousel-slide" data-index="3"><img src="HeroImage4.jpg" alt="Hero Image 4" /></div>
                    
                    <div class="carousel-arrow arrow-left"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></div>
                    <div class="carousel-arrow arrow-right"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></div>
                </div>

                <div class="mt-24 mb-12">
                    <h3 class="text-3xl font-extrabold text-gray-900 text-center mb-12">Why Choose Us?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-8">
                        <div class="attribute-card">
                            <i class="fas fa-headset icon"></i>
                            <h4>24/7 Assistance</h4>
                            <p>Day or night, our team is always on standby to ensure you're never left stranded.</p>
                        </div>
                        <div class="attribute-card">
                            <i class="fas fa-globe-americas icon"></i>
                            <h4>International Coverage</h4>
                            <p>Our services extend across borders, providing you with reliable help wherever you are.</p>
                        </div>
                        <div class="attribute-card">
                            <i class="fas fa-file-invoice-dollar icon"></i>
                            <h4>Transparent Pricing</h4>
                            <p>No hidden fees. We provide clear, upfront prices for top-quality, honest service.</p>
                        </div>
                        <div class="attribute-card">
                            <i class="fas fa-truck-pickup icon"></i>
                            <h4>Professional Equipment</h4>
                            <p>We use state-of-the-art trucks to handle your vehicle with the utmost care.</p>
                        </div>
                        <div class="attribute-card">
                            <i class="fas fa-motorcycle icon"></i>
                            <h4>Versatile Towing</h4>
                            <p>From motorcycles to SUVs, we have the capability to transport a wide range of vehicles safely.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="content-section">
            <div class="container mx-auto p-8 lg:p-12">
                <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 text-center mb-8">Image Gallery</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
                    <img src="image1.png" alt="Gallery Icon 1" class="gallery-image w-full h-auto rounded-lg shadow-md cursor-pointer" />
                    <img src="image2.png" alt="Gallery Icon 2" class="gallery-image w-full h-auto rounded-lg shadow-md cursor-pointer" />
                    <img src="image3.png" alt="Gallery Icon 3" class="gallery-image w-full h-auto rounded-lg shadow-md cursor-pointer" />
                    <img src="image4.png" alt="Gallery Icon 4" class="gallery-image w-full h-auto rounded-lg shadow-md cursor-pointer" />
                    <img src="image5.png" alt="Gallery Icon 5" class="gallery-image w-full h-auto rounded-lg shadow-md cursor-pointer" />
                </div>
            </div>
        </section>

        <!-- Drivers Section -->
        <section id="drivers" class="content-section">
            <div class="container mx-auto p-8 lg:p-12">
                <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 text-center mb-8">Our Drivers</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-2xl shadow-lg flex flex-col items-center text-center">
                        <img src="driver1.png" alt="Driver 1" class="w-32 h-32 rounded-full mb-4 object-cover border-4 border-blue-800" />
                        <h3 class="text-2xl font-bold text-gray-900">Mick "Crocodile" Johnson</h3>
                        <p class="text-gray-500 mb-2">+1 555-1234</p>
                        <p class="text-gray-700 font-light">With 25 years experience transporting crocodiles, Mick is our go-to guy for a wild ride. He's never lost a passenger—or a crocodile!</p>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-lg flex flex-col items-center text-center">
                        <img src="driver2.png" alt="Driver 2" class="w-32 h-32 rounded-full mb-4 object-cover border-4 border-blue-800" />
                        <h3 class="text-2xl font-bold text-gray-900">Stella "The Comet" Smith</h3>
                        <p class="text-gray-500 mb-2">+1 555-5678</p>
                        <p class="text-gray-700 font-light">Stella once delivered a wedding cake so fast it was still frozen solid upon arrival. Her motto? "Faster than a speeding comet!"</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Fare Calculator Section -->
        <section id="calculator" class="content-section">
            <div class="container mx-auto p-8 flex justify-center">
                <div class="calculator-card w-full max-w-2xl text-center">
                    <h2 class="text-3xl font-extrabold text-gray-900 mb-2">Instant Fare Quote</h2>
                    <p class="text-gray-500 mb-8">Get a transparent price estimate for your needs.</p>
            
                    <div class="flex items-center justify-end mb-6">
                        <span class="mr-3 text-sm font-medium text-gray-700">Select City</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="mode-toggle">
                            <span class="slider"></span>
                        </label>
                        <span class="ml-3 text-sm font-medium text-gray-700">Manual Entry</span>
                    </div>

                    <form id="fareForm" class="space-y-8">
                        <!-- DISTANCE INPUTS -->
                        <div>
                            <div id="select-mode">
                                <label for="point-a" class="block text-sm font-medium text-gray-700 mb-1 text-left">Point A (Origin)</label>
                                <select id="point-a" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-800 focus:border-blue-800 sm:text-sm bg-gray-200" disabled>
                                    <option value="Chișinău, Moldova">Chișinău, Moldova</option>
                                </select>
                                <label for="point-b" class="block text-sm font-medium text-gray-700 mb-1 text-left mt-4">Point B (Destination)</label>
                                <select id="point-b" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-800 focus:border-blue-800 sm:text-sm">
                                    <option value="">Select a destination...</option>
                                </select>
                            </div>
                            <div id="manual-mode" class="hidden">
                                <label for="manual-distance" class="block text-sm font-medium text-gray-700 mb-1 text-left">Distance (km)</label>
                                <input type="number" id="manual-distance" name="manual-distance" step="0.1" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-800 focus:border-blue-800 sm:text-sm" placeholder="e.g., 100">
                            </div>
                        </div>

                        <!-- VEHICLE TYPE -->
                        <div class="text-left">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Vehicle Type</label>
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center">
                                <div>
                                    <input type="radio" name="vehicle-type" id="moto" value="9" class="hidden peer" checked>
                                    <label for="moto" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer peer-checked:border-blue-800 peer-checked:ring-2 peer-checked:ring-blue-800 transition-all hover:border-gray-400">
                                        <i class="fas fa-motorcycle text-3xl mb-2 text-blue-800"></i>
                                        <span class="text-sm font-semibold block">MOTO / ATV</span>
                                        <span class="text-xs text-gray-500 block">9 MDL/km</span>
                                    </label>
                                </div>
                                <div>
                                    <input type="radio" name="vehicle-type" id="small-car" value="10" class="hidden peer">
                                    <label for="small-car" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer peer-checked:border-blue-800 peer-checked:ring-2 peer-checked:ring-blue-800 transition-all hover:border-gray-400">
                                        <i class="fas fa-car-side text-3xl mb-2 text-blue-800"></i>
                                        <span class="text-sm font-semibold block">&lt; 2000 kg</span>
                                        <span class="text-xs text-gray-500 block">10 MDL/km</span>
                                    </label>
                                </div>
                                <div>
                                    <input type="radio" name="vehicle-type" id="big-car" value="11" class="hidden peer">
                                    <label for="big-car" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer peer-checked:border-blue-800 peer-checked:ring-2 peer-checked:ring-blue-800 transition-all hover:border-gray-400">
                                        <i class="fas fa-truck text-3xl mb-2 text-blue-800"></i>
                                        <span class="text-sm font-semibold block">&gt; 2000 kg</span>
                                        <span class="text-xs text-gray-500 block">11 MDL/km</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- ADDITIONAL OPTIONS -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-left">
                            <label for="is-damaged" class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer has-[:checked]:border-blue-800 has-[:checked]:ring-2 has-[:checked]:ring-blue-800 transition-all hover:border-gray-400">
                                <input type="checkbox" id="is-damaged" name="is-damaged" class="h-5 w-5 rounded border-gray-300 text-blue-800 focus:ring-blue-700">
                                <div class="ml-4">
                                    <span class="text-sm font-medium text-gray-900">Vehicle Damaged?</span>
                                    <p class="text-xs text-gray-500">+100 MDL</p>
                                </div>
                            </label>
                            <label for="is-automatic" class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer has-[:checked]:border-blue-800 has-[:checked]:ring-2 has-[:checked]:ring-blue-800 transition-all hover:border-gray-400">
                                <input type="checkbox" id="is-automatic" name="is-automatic" class="h-5 w-5 rounded border-gray-300 text-blue-800 focus:ring-blue-700">
                                <div class="ml-4">
                                    <span class="text-sm font-medium text-gray-900">Automatic Gearbox?</span>
                                    <p class="text-xs text-gray-500">+100 MDL</p>
                                </div>
                            </label>
                        </div>
                        
                        <button type="submit" id="calculateBtn" class="w-full flex justify-center py-4 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-800 transition-all duration-200 button-hover-effect disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            Calculate Fare
                        </button>
                    </form>
                    
                    <!-- NEW: Gears Loader Animation -->
                    <div id="loaderContainer" class="hidden w-full my-8 flex justify-center items-center space-x-4">
                        <i class="fas fa-cog gear-1"></i>
                        <i class="fas fa-cog gear-2"></i>
                        <i class="fas fa-cog gear-3"></i>
                    </div>

                    <div id="resultContainer" class="hidden my-8">
                        <p id="resultText" class="text-3xl font-bold text-gray-800"></p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Assistant Avatar -->
    <div id="assistantContainer" class="assistant-container">
        <div class="social-icons">
            <div class="social-item">
                <b class="social-label">WhatsApp</b>
                <a href="#" class="social-icon"><img src="whatsapp.png" alt="WhatsApp"></a>
            </div>
            <div class="social-item">
                <b class="social-label">Telegram</b>
                <a href="#" class="social-icon"><img src="telegram.png" alt="Telegram"></a>
            </div>
            <div class="social-item">
                <b class="social-label">Viber</b>
                <a href="#" class="social-icon"><img src="viber.png" alt="Viber"></a>
            </div>
        </div>
        <div id="assistantAvatar" class="assistant-avatar">
            <div id="comicBubble" class="comic-bubble">Contact us anywhere!</div>
            <div class="rotating-border">
                <div class="relative w-16 h-16 rounded-full border-4 border-orange-500 p-1 bg-white" style="z-index: 2;">
                    <img src="avatar1.png" alt="Assistant Avatar" class="rounded-full">
                    <div class="dot"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section');
            const assistantContainer = document.getElementById('assistantContainer');
            const assistantAvatar = document.getElementById('assistantAvatar');
            const fareForm = document.getElementById('fareForm');
            const resultText = document.getElementById('resultText');
            
            const modeToggle = document.getElementById('mode-toggle');
            const selectModeDiv = document.getElementById('select-mode');
            const manualModeDiv = document.getElementById('manual-mode');
            const pointBDropdown = document.getElementById('point-b');
            const manualDistanceInput = document.getElementById('manual-distance');
            const calculateBtn = document.getElementById('calculateBtn');
            const comicBubble = document.getElementById('comicBubble');
            
            // UPDATED: Get the new loader elements
            const loaderContainer = document.getElementById('loaderContainer');
            const resultContainer = document.getElementById('resultContainer');

            // --- Audio Notification Logic ---
            let audioCtx;
            const initAudioContext = () => {
                if (!audioCtx) {
                    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                }
                if (audioCtx.state === 'suspended') {
                    audioCtx.resume();
                }
            };
            document.body.addEventListener('click', initAudioContext, { once: true });
            document.body.addEventListener('touchstart', initAudioContext, { once: true });

            function playNotificationSound() {
                if (!audioCtx) return;
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.3);
                oscillator.start(audioCtx.currentTime);
                oscillator.stop(audioCtx.currentTime + 0.3);
            }

            // Show comic bubble after 5 seconds
            setTimeout(() => {
                comicBubble.classList.add('show');
                playNotificationSound();
            }, 5000);

            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navLinks.forEach(nav => nav.classList.remove('active'));
                    sections.forEach(sec => sec.classList.remove('active'));
                    const targetSection = e.target.getAttribute('data-section');
                    document.getElementById(targetSection).classList.add('active');
                    e.target.classList.add('active');
                });
            });

            // Hero Carousel
            const slides = document.querySelectorAll('.carousel-slide');
            const arrowLeft = document.querySelector('.arrow-left');
            const arrowRight = document.querySelector('.arrow-right');
            let currentSlide = 0;
            let autoSlideInterval;

            const updateSlides = () => {
                slides.forEach((slide, index) => {
                    slide.classList.remove('active', 'prev', 'next', 'hidden-prev', 'hidden-next');
                    if (index === currentSlide) slide.classList.add('active');
                    else if (index === (currentSlide - 1 + slides.length) % slides.length) slide.classList.add('prev');
                    else if (index === (currentSlide + 1) % slides.length) slide.classList.add('next');
                    else if (index === (currentSlide - 2 + slides.length) % slides.length) slide.classList.add('hidden-prev');
                    else slide.classList.add('hidden-next');
                });
            };
            
            const nextSlide = () => { currentSlide = (currentSlide + 1) % slides.length; updateSlides(); };
            const prevSlide = () => { currentSlide = (currentSlide - 1 + slides.length) % slides.length; updateSlides(); };
            const startAutoSlide = () => { autoSlideInterval = setInterval(nextSlide, 10000); };
            const stopAutoSlide = () => { clearInterval(autoSlideInterval); };
            arrowRight.addEventListener('click', () => { nextSlide(); stopAutoSlide(); startAutoSlide(); });
            arrowLeft.addEventListener('click', () => { prevSlide(); stopAutoSlide(); startAutoSlide(); });
            updateSlides();
            startAutoSlide();

            // Assistant avatar social icons
            assistantAvatar.addEventListener('click', () => {
                assistantContainer.classList.toggle('active');
                if (comicBubble.classList.contains('show')) {
                    comicBubble.classList.remove('show');
                }
            });

            // --- Fare Calculator Logic ---
            const travelData = { "origin": "Chișinău, Moldova", "distances_to_districts": [ { "district": "Anenii Noi", "distance_km": 36.9 }, { "district": "Basarabeasca", "distance_km": 92.5 }, { "district": "Briceni", "distance_km": 242 }, { "district": "Cahul", "distance_km": 178 }, { "district": "Cantemir", "distance_km": 128 }, { "district": "Călărași", "distance_km": 49.3 }, { "district": "Căușeni", "distance_km": 87.2 }, { "district": "Cimișlia", "distance_km": 68 }, { "district": "Criuleni", "distance_km": 43.1 }, { "district": "Dondușeni", "distance_km": 189 }, { "district": "Drochia", "distance_km": 152 }, { "district": "Dubăsari", "distance_km": 53.6 }, { "district": "Edineț", "distance_km": 206 }, { "district": "Fălești", "distance_km": 137 }, { "district": "Florești", "distance_km": 132 }, { "district": "Glodeni", "distance_km": 153 }, { "district": "Hîncești", "distance_km": 35.5 }, { "district": "Ialoveni", "distance_km": 10.9 }, { "district": "Leova", "distance_km": 96.1 }, { "district": "Nisporeni", "distance_km": 72.8 }, { "district": "Ocnița", "distance_km": 236 }, { "district": "Orhei", "distance_km": 50.1 }, { "district": "Rezina", "distance_km": 97.4 }, { "district": "Rîșcani", "distance_km": 182 }, { "district": "Sîngerei", "distance_km": 103 }, { "district": "Soroca", "distance_km": 160 }, { "district": "Strășeni", "distance_km": 25.1 }, { "district": "Șoldănești", "distance_km": 103 }, { "district": "Ștefan Vodă", "distance_km": 105 }, { "district": "Taraclia", "distance_km": 128 }, { "district": "Telenești", "distance_km": 90.6 }, { "district": "Ungheni", "distance_km": 106 } ] };
            travelData.distances_to_districts.sort((a, b) => a.district.localeCompare(b.district)).forEach(data => {
                const option = document.createElement('option');
                option.value = data.distance_km;
                option.textContent = data.district;
                pointBDropdown.appendChild(option);
            });
            
            const validateFareForm = () => {
                const isManualMode = modeToggle.checked;
                let isValid = false;
                if (isManualMode) {
                    const distance = parseFloat(manualDistanceInput.value);
                    isValid = !isNaN(distance) && distance > 0;
                } else {
                    isValid = pointBDropdown.value !== "";
                }
                calculateBtn.disabled = !isValid;
            };

            modeToggle.addEventListener('change', () => {
                if (modeToggle.checked) {
                    selectModeDiv.classList.add('hidden');
                    manualModeDiv.classList.remove('hidden');
                } else {
                    selectModeDiv.classList.remove('hidden');
                    manualModeDiv.classList.add('hidden');
                }
                resultContainer.classList.add('hidden');
                validateFareForm();
            });

            pointBDropdown.addEventListener('change', validateFareForm);
            manualDistanceInput.addEventListener('input', validateFareForm);

            // UPDATED: SUBMIT LOGIC WITH GEARS ANIMATION
            fareForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                calculateBtn.disabled = true;
                calculateBtn.textContent = 'Calculating...';
                resultContainer.classList.add('hidden');

                // 2. Show the gears loader
                loaderContainer.classList.remove('hidden');

                // 3. Set a 3-second timer for the calculation.
                setTimeout(() => {
                    // 4. Perform the actual fare calculation.
                    let distance = modeToggle.checked ? parseFloat(manualDistanceInput.value) : parseFloat(pointBDropdown.value);
                    const vehicleTypeRate = parseFloat(document.querySelector('input[name="vehicle-type"]:checked').value);
                    const isDamaged = document.getElementById('is-damaged').checked;
                    const isAutomatic = document.getElementById('is-automatic').checked;
                    const damagedFee = isDamaged ? 100 : 0;
                    const transmissionFee = isAutomatic ? 100 : 0;
                    const baseFare = 100;
                    const totalFare = baseFare + (distance * vehicleTypeRate * 2) + damagedFee + transmissionFee;
                    
                    resultText.textContent = `Estimated Fare: ${totalFare.toFixed(2)} MDL`;
                    
                    // 5. Hide the animation container.
                    loaderContainer.classList.add('hidden');
                    
                    // 6. Show the result container.
                    resultContainer.classList.remove('hidden');
                    
                    // 7. Reset the button text and re-validate its state.
                    calculateBtn.textContent = 'Calculate Fare';
                    validateFareForm();
                }, 3000); 
            });

            // Initial validation check on page load.
            validateFareForm();
        });
    </script>
</body>
</html>